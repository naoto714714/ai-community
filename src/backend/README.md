# AI Community Backend

FastAPI + SQLAlchemy + WebSocketã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
uv sync

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
uv run uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API: `http://localhost:8000`

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
src/backend/
â”œâ”€â”€ main.py          # FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ database.py      # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
â”œâ”€â”€ models.py        # SQLAlchemyãƒ¢ãƒ‡ãƒ«
â”œâ”€â”€ schemas.py       # Pydanticã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ crud.py          # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ
â”œâ”€â”€ websocket.py     # WebSocketå‡¦ç†
â”œâ”€â”€ pyproject.toml   # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â””â”€â”€ chat.db          # SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
```

## ğŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Python**: 3.13
- **FastAPI**: Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **SQLAlchemy**: ORM
- **SQLite**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **WebSocket**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡
- **Pydantic**: ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **uvicorn**: ASGIã‚µãƒ¼ãƒãƒ¼

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### Channel
- `id`: str (ä¸»ã‚­ãƒ¼)
- `name`: str (ãƒãƒ£ãƒ³ãƒãƒ«å)
- `description`: str (èª¬æ˜)
- `created_at`: datetime

### Message
- `id`: str (ä¸»ã‚­ãƒ¼)
- `channel_id`: str (ãƒãƒ£ãƒ³ãƒãƒ«ID)
- `user_id`: str (ãƒ¦ãƒ¼ã‚¶ãƒ¼ID)
- `user_name`: str (ãƒ¦ãƒ¼ã‚¶ãƒ¼å)
- `content`: str (ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹)
- `timestamp`: datetime (é€ä¿¡æ™‚åˆ»)
- `is_own_message`: bool (è‡ªåˆ†ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹)
- `created_at`: datetime (ä½œæˆæ™‚åˆ»)

## ğŸ”— APIä»•æ§˜

### REST API
- `GET /` - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- `GET /api/channels` - ãƒãƒ£ãƒ³ãƒãƒ«ä¸€è¦§å–å¾—
- `GET /api/channels/{channel_id}/messages` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´å–å¾—

### WebSocket
- `ws://localhost:8000/ws` - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡
  - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡: `{"type": "message:send", "data": {...}}`
  - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿å­˜é€šçŸ¥: `{"type": "message:saved", "data": {...}}`

## ğŸ”¨ é–‹ç™ºãƒ«ãƒ¼ãƒ«

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†
- **å¿…é ˆ**: `uv`ã®ã¿ä½¿ç”¨ï¼ˆ`pip`ã¯ä½¿ç”¨ç¦æ­¢ï¼‰
- ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«: `uv add package`
- é–‹ç™ºä¾å­˜: `uv add --dev package`

### ã‚³ãƒ¼ãƒ‰å“è³ª
- å‹ãƒ’ãƒ³ãƒˆå¿…é ˆ
- ãƒ‘ãƒ–ãƒªãƒƒã‚¯é–¢æ•°ã«docstring
- è¡Œã®é•·ã•: æœ€å¤§120æ–‡å­—
- é–¢æ•°ã¯å°ã•ãã€å˜ä¸€è²¬ä»»

### ãƒ†ã‚¹ãƒˆ
- ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯: `uv run --frozen pytest`
- éåŒæœŸãƒ†ã‚¹ãƒˆ: anyioä½¿ç”¨
- æ–°æ©Ÿèƒ½ãƒ»ãƒã‚°ä¿®æ­£æ™‚ã¯å¿…ãšãƒ†ã‚¹ãƒˆè¿½åŠ 

## ğŸ” é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

```bash
# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
uv run --frozen ruff format .

# ãƒªãƒ³ãƒˆ
uv run --frozen ruff check .

# å‹ãƒã‚§ãƒƒã‚¯
uv run --frozen pyright

# ãƒ†ã‚¹ãƒˆ
uv run --frozen pytest

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
uv run uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

## ğŸ“‹ å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

- âœ… FastAPIåŸºæœ¬è¨­å®š
- âœ… SQLAlchemy + SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- âœ… Channel/Messageãƒ¢ãƒ‡ãƒ«
- âœ… REST APIï¼ˆãƒãƒ£ãƒ³ãƒãƒ«ä¸€è¦§ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ï¼‰
- âœ… WebSocketé€šä¿¡
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡
- âœ… ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ°¸ç¶šåŒ–
- âœ… CORSè¨­å®š
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°